{% extends "./template.html" %}
{% block content %}
    {% if not total_erros %}
    <div class="cadastrar_produto">
    <h2>Emitir relatório de erros</h2>
    <form action="/vendas/erros_relatorio" method="post">

        <label for="data_inicial">Data inicial:</label><br>
        <input type="date" id="data_inicial" name="data_inicial" required><br><br>

        <label for="data_final">Data final</label><br>
        <input type="date" id="data_final" name="data_final" required><br><br>

        <input type="submit" value="Emitir">
    </form>
        </div>
    {% endif %}

    {% if total_erros %}
     <style>
    .tabelaerrosvendas{
        font-size: small;
    }
@media print {
    .resumo{
        margin-bottom: 200px;
    }


}
    </style>

       <h2>Listagem de erros de vendas</h2>
        <h3>Referente ao período de {{ data_inicial.strftime('%d/%m/%Y') }} á {{ data_final.strftime('%d/%m/%Y') }}</h3>
    <div class="resumo">
    <br>

    <div class="resumoerros">
    <h3>Erros por Funcionário</h3>
    <table class="tabelaerros">
        <tr>
            <th>Funcionário</th>
            <th>Erros</th>
        </tr>
        {% for erro_por_funcionario in erros_por_funcionario %}
        <tr>
            <td>{{ erro_por_funcionario.erro_funcionario }}</td>
            <td>{{ erro_por_funcionario.total_erros }}</td>
        </tr>
        {% endfor %}
    </table>
    </div>

    <div class="resumoerros">
    <h3>Total de erros: {{ total_erros }}</h3>
    </div>


    </div>

    <div>
        <br>
    <br>

    <table class="tabelaerrosvendas">
  <tr>
      <th>Data</th>
      <th>Funcionário</th>
      <th>Cliente</th>
      <th>Erros</th>
      <th>Motorista</th>
      <th>Produtos</th>
      <th>Descrição do erro</th>
      <th>Criador</th>
      <th class="botoesacao">Ação</th>

  </tr>
   {% for erro in erros %}
  <tr>
    <td>{{ erro.data_do_erro.strftime('%d/%m/%Y') }}</td>
    <td>{{ erro.erro_funcionario }}</td>
    <td>{{ erro.erro_cliente}}</td>
    <td>{{ erro.quantidade_de_erros}}</td>
    <td>{{ erro.motorista_da_entrega }}</td>
    <td>{{ erro.produto_erro }}</td>
    <td>{{ erro.descricao_do_erro }}
    <td>{{ erro.criador }}</td>
    <td class="botoesacao">
        <form action="/vendas/editar_erro/{{ erro.id }}" method="get">
        <input type="submit" value="Editar">
    </form>
        <form action="/vendas/deletar/{{ erro.id }}" method="post">
        <input type="submit" value="Apagar">
    </form></td>
  </tr>
        {% endfor %}
</table>
    </div>
    {% endif %}
{% endblock %}